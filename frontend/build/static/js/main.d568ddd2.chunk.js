(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{123:function(e,t,a){},200:function(e,t,a){e.exports=a(325)},324:function(e,t,a){},325:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(148),l=a(396),c=a(24),o=a(395),i=a(0),u=a.n(i),s=a(11),m=a.n(s),E=a(68),d=(a(205),a(23)),f=a(52),g=(a(123),u.a.createContext()),p=g.Provider,h=(g.Consumer,g),v=a(10),b=a(22),S=a.n(b);a(222);a(223).config();var I="0",O="https://example.alwaysdata.net";void 0!==window.BACKEND_PORT?(I=window.BACKEND_PORT,O=window.DEPLOYED_URL):I="3234";var y="0"===I||void 0===I?O:"http://localhost:"+I,C=1,T=2,N=void 0!==window.ITERATION?parseInt(window.ITERATION):parseInt("3");console.log("Using backend at",y),console.log("Running frontend for iteration",N);S.a.defaults.baseURL=y,S.a.defaults.headers.put["Content-Type"]="application/json",S.a.defaults.headers.post["Content-Type"]="application/json",S.a.defaults.headers.delete["Content-Type"]="application/json",S.a.interceptors.request.use((function(e){return e}));S.a.interceptors.response.use((function(e){return"error"in e.data?(E.b.error("An error occured. Try again later"),Promise.reject()):e}),(function(e){return console.error(e),E.b.error(e.response.data.error.message||"An error occured. Try again later"),Promise.reject(Object(v.a)({},e))}));var j=function(e){var t=u.a.useContext(h);return console.log(t),t?u.a.createElement(f.b,e):u.a.createElement(f.a,{to:"/login"})},k=a(14),A=a(50),M=a(332),D=a(376),w=a(333),L=a(379),_=a(380),R=a(381),P=a(382),x=a(383),U=a(334),F=a(365),H=a(163),G=a.n(H),W=a(162),V=a.n(W),z=[{},{},{AUTH_LOGIN:"auth/login/v2",AUTH_REGISTER:"auth/register/v2",AUTH_LOGOUT:"auth/logout/v1",CHANNEL_INVITE:"channel/invite/v2",CHANNEL_DETAILS:"channel/details/v2",CHANNEL_MESSAGES:"channel/messages/v2",CHANNEL_JOIN:"channel/join/v2",CHANNEL_ADDOWNER:"channel/addowner/v1",CHANNEL_REMOVEOWNER:"channel/removeowner/v1",CHANNEL_LEAVE:"channel/leave/v1",CHANNELS_LIST:"channels/list/v2",CHANNELS_LISTALL:"channels/listall/v2",CHANNELS_CREATE:"channels/create/v2",MESSAGE_SEND:"message/send/v1",MESSAGE_EDIT:"message/edit/v1",MESSAGE_REMOVE:"message/remove/v1",DM_DETAILS:"dm/details/v1",DM_LIST:"dm/list/v1",DM_CREATE:"dm/create/v1",DM_REMOVE:"dm/remove/v1",DM_LEAVE:"dm/leave/v1",DM_MESSAGES:"dm/messages/v1",MESSAGE_SENDDM:"message/senddm/v1",USER_PROFILE:"user/profile/v2",USER_PROFILE_SETNAME:"user/profile/setname/v1",USER_PROFILE_SETEMAIL:"user/profile/setemail/v1",USER_PROFILE_SETHANDLE:"user/profile/sethandle/v1",USERS_ALL:"users/all/v1",SEARCH:"search/v1",CLEAR:"clear/v1"},{AUTH_LOGIN:"auth/login/v3",AUTH_REGISTER:"auth/register/v3",AUTH_LOGOUT:"auth/logout/v2",CHANNEL_INVITE:"channel/invite/v3",CHANNEL_DETAILS:"channel/details/v3",CHANNEL_MESSAGES:"channel/messages/v3",CHANNEL_JOIN:"channel/join/v3",CHANNEL_ADDOWNER:"channel/addowner/v2",CHANNEL_REMOVEOWNER:"channel/removeowner/v2",CHANNEL_LEAVE:"channel/leave/v2",CHANNELS_LIST:"channels/list/v3",CHANNELS_LISTALL:"channels/listall/v3",CHANNELS_CREATE:"channels/create/v3",MESSAGE_SEND:"message/send/v2",MESSAGE_EDIT:"message/edit/v2",MESSAGE_REMOVE:"message/remove/v2",MESSAGE_SHARE:"message/share/v1",DM_DETAILS:"dm/details/v2",DM_LIST:"dm/list/v2",DM_CREATE:"dm/create/v2",DM_REMOVE:"dm/remove/v2",DM_LEAVE:"dm/leave/v2",DM_MESSAGES:"dm/messages/v2",MESSAGE_SENDDM:"message/senddm/v2",USER_PROFILE:"user/profile/v3",USER_PROFILE_SETNAME:"user/profile/setname/v2",USER_PROFILE_SETEMAIL:"user/profile/setemail/v2",USER_PROFILE_SETHANDLE:"user/profile/sethandle/v2",USERS_ALL:"users/all/v2",SEARCH:"search/v1",ADMIN_USER_REMOVE:"admin/user/remove/v1",ADMIN_USERPERMISSION_CHANGE:"admin/userpermission/change/v1",NOTIFICATIONS_GET:"notifications/get/v1",CLEAR:"clear/v1",STANDUP_START:"standup/start/v1",STANDUP_ACTIVE:"standup/active/v1",STANDUP_SEND:"standup/send/v1",AUTH_PASSWORDRESET_REQUEST:"auth/passwordreset/request/v1",AUTH_PASSWORDRESET_RESET:"auth/passwordreset/reset/v1",USER_STATS:"user/stats/v1",USERS_STATS:"users/stats/v1",USER_PROFILE_UPLOADPHOTO:"user/profile/uploadphoto/v1",MESSAGE_SENDLATER:"message/sendlater/v1",MESSAGE_SENDLATERDM:"message/sendlaterdm/v1",MESSAGE_REACT:"message/react/v1",MESSAGE_UNREACT:"message/unreact/v1",MESSAGE_PIN:"message/pin/v1",MESSAGE_UNPIN:"message/unpin/v1"}],q=function(e,t,a){if(2===N){if(null==z[N][t])return Promise.reject(new Error("Don't worry - this is not part of iteration 2 so this error is expected"));switch(e){case"GET":return S.a.get(z[N][t],{params:a});case"POST":return S.a.post(z[N][t],a);case"PUT":return S.a.put(z[N][t],a);case"DELETE":return S.a.delete(z[N][t],{params:a});default:console.log("yikes")}}else if(3===N){var n=a.token,r=Object(k.a)(a,["token"]);switch(e){case"GET":return S.a.get(z[N][t],{params:r,headers:{token:n}});case"POST":return S.a.post(z[N][t],r,{headers:{token:n}});case"PUT":return S.a.put(z[N][t],r,{headers:{token:n}});case"DELETE":return S.a.delete(z[N][t],{params:r,headers:{token:n}});default:console.log("yikes")}}};function B(e,t){var a=Object(i.useRef)();Object(i.useEffect)((function(){a.current=e}),[e]),Object(i.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}var J=function(e,t){return parseInt(e,10)===parseInt(t,10)};function K(e){var t=localStorage.getItem("uId");return null==t&&(t=-1),t}var Y=[],Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;void 0===Y.find((function(t){return t.subscriber===e}))&&Y.push({subscriber:e,interval:t})},$=function(e){return Y=Y.filter((function(t){return t.subscriber!==e}))},X=function(e){Y.forEach((function(t){e&&e%t.interval!==0||t.subscriber()}))},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e&&"function"===typeof e;return u.a.useEffect((function(){if(n)return e(),Q(e,a),function(){return $(e)}}),t),X},ee=!1,te=0,ae=a(362);var ne=function(){return u.a.createElement("div",{style:{display:"flex",width:"100%",height:"100%",justifyContent:"center",alignItems:"center"}},u.a.createElement(ae.a,null))},re=a(366),le=a(367),ce=a(368),oe=a(369),ie=a(400),ue=a(372),se=a(373);var me=function(e){var t=e.channelId,a=(Object(k.a)(e,["channelId"]),u.a.useState(!1)),r=Object(n.a)(a,2),l=r[0],c=r[1],o=u.a.useState(""),i=Object(n.a)(o,2),s=i[0],m=i[1],E=u.a.useState([]),d=Object(n.a)(E,2),f=d[0],g=d[1],p=u.a.useContext(h),v=Z();function b(){c(!1)}return u.a.useEffect((function(){q("GET","USERS_ALL",{token:p}).then((function(e){var t=e.data;g(t.users)})).catch((function(e){return console.log(e)}))}),[p]),u.a.createElement("div",null,u.a.createElement(F.a,{variant:"outlined",color:"primary",onClick:function(){c(!0)}},"Invite Member"),u.a.createElement(re.a,{open:l,onClose:b,"aria-labelledby":"form-dialog-title"},u.a.createElement(le.a,{id:"form-dialog-title"},"Invite User"),u.a.createElement("form",{onSubmit:function(e){e.preventDefault(),null!=s&&q("POST","CHANNEL_INVITE",{token:p,uId:s,channelId:Number.parseInt(t)}).then((function(e){console.log(e),v()})).catch((function(e){return console.log(e)}))}},u.a.createElement(ce.a,null,u.a.createElement(oe.a,null,"Select a user below to invite them to this channel"),u.a.createElement(ie.a,{style:{width:"100%"},id:"uId",onChange:function(e){var t=parseInt(e.target.value,10);m(t)},value:s},f.map((function(e,t){return u.a.createElement(ue.a,{key:e.uId,value:e.uId},e.nameFirst," ",e.nameLast)})))),u.a.createElement(se.a,null,u.a.createElement(F.a,{onClick:b,color:"primary"},"Cancel"),u.a.createElement(F.a,{onClick:b,type:"submit",color:"primary"},"Invite")))))},Ee=a(152),de=a.n(Ee),fe=a(93),ge=a.n(fe),pe=a(399),he=a(375),ve=a(157),be=a.n(ve),Se=a(156),Ie=a.n(Se),Oe=a(335),ye=a(397);var Ce=function(e){var t=e.open,a=e.handleClose,r=e.onTimerChange,l=(Object(k.a)(e,["open","handleClose","onTimerChange"]),u.a.useState(new Date)),c=Object(n.a)(l,2),o=c[0],i=c[1];return u.a.createElement("div",null,u.a.createElement(re.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title"},u.a.createElement(le.a,{id:"form-dialog-title"},"Send later"),u.a.createElement("form",{onSubmit:function(e){e.preventDefault(),r(o)}},u.a.createElement(ce.a,null,u.a.createElement(ye.a,{margin:"normal",id:"time-picker",label:"Time picker",value:o,onChange:function(e){return i(e.toDate())},KeyboardButtonProps:{"aria-label":"change time"}}),u.a.createElement(oe.a,null,"Enter a time to send")),u.a.createElement(se.a,null,u.a.createElement(F.a,{onClick:a,color:"primary"},"Cancel"),u.a.createElement(F.a,{onClick:a,type:"submit",color:"primary"},"Set Time")))))},Te=Object(Oe.a)((function(e){return{flex:{display:"flex",flexDirection:"row",alignItems:"center"},input:{margin:e.spacing(1),marginRight:0},button:{margin:e.spacing(1),marginLeft:0,alignSelf:"stretch"},rightIcon:{marginLeft:e.spacing(1)},standupTimer:{margin:e.spacing(2)}}}));var Ne=function(e){var t=e.channelId,a=void 0===t?-1:t,r=e.dmId,l=void 0===r?-1:r,c=Te(),o=u.a.useState(""),i=Object(n.a)(o,2),s=i[0],m=i[1],E=u.a.useState(-1),d=Object(n.a)(E,2),f=d[0],g=d[1],p=u.a.useState(!1),v=Object(n.a)(p,2),b=v[0],S=v[1],I=u.a.useContext(h),O=u.a.useContext(Ye),y=u.a.useContext(je);O=O||function(){},y=y||function(){};var C=-1!==f,T=u.a.useState(),N=Object(n.a)(T,2),j=N[0],k=N[1],M=u.a.useState(),D=Object(n.a)(M,2),w=D[0],L=D[1],_=function(){var e=s.trim();if(e)if(m(""),-1===l&&j&&j>0)q("POST","STANDUP_SEND",{token:I,channelId:Number.parseInt(a),message:e}).then((function(e){var t=e.data;console.log(t),O()})).catch((function(e){return console.log(e)}));else{if(C)return-1===l?q("POST","MESSAGE_SENDLATER",{token:I,channelId:Number.parseInt(a),message:e,timeSent:f.getTime()/1e3}).then((function(e){var t=e.data;return console.log(t)})).catch((function(e){return console.log(e)})):q("POST","MESSAGE_SENDLATERDM",{token:I,dmId:Number.parseInt(l),message:e,timeSent:f.getTime()/1e3}).then((function(e){var t=e.data;return console.log(t)})).catch((function(e){return console.log(e)})),void g(-1);if(-1===l&&e.startsWith("/standup")){var t=e.match(/\/standup\s+([1-9][0-9]*)/);if(!t||t.length<2)alert("Usage: /standup <duration in seconds>");else{var n=parseInt(t[1],10);isNaN(n)||!Number.isInteger(n)?alert("Usage: /standup <duration in seconds>"):q("POST","STANDUP_START",{token:I,channelId:Number.parseInt(a),length:n}).then((function(e){var t=e.data.timeFinish;L(t),alert("You've started a standup for ".concat(n," seconds"))})).catch((function(e){return console.log(e)}))}}else-1===l?q("POST","MESSAGE_SEND",{token:I,channelId:Number.parseInt(a),message:e}).then((function(e){var t=e.data;console.log(t),O()})).catch((function(e){return console.log(e)})):q("POST","MESSAGE_SENDDM",{token:I,dmId:Number.parseInt(l),message:e}).then((function(e){var t=e.data;console.log(t),y()})).catch((function(e){return console.log(e)}))}};B((function(){w>Date.now()/1e3?k((function(){return Math.round(w-Math.round(Date.now()/1e3))})):k()}),1e3);var R=function(){-1!==a&&q("GET","STANDUP_ACTIVE",{token:I,channelId:a}).then((function(e){var t=e.data,a=t.isActive,n=void 0!==a&&a,r=t.timeFinish;n&&r?L(r):(k(0),L(-1))})).catch((function(e){return console.log(e)}))};return Z(R,[s]),u.a.useEffect(R,[a]),u.a.createElement(u.a.Fragment,null,j>0&&u.a.createElement(A.a,{variant:"caption",className:c.standupTimer},"STANDUP ACTIVE: ".concat(j," seconds remaining")),u.a.createElement("div",{className:c.flex},u.a.createElement(pe.a,{className:c.input,label:"Send a message \ud83d\udcac",multiline:!0,placeholder:"...",fullWidth:!0,margin:"normal",variant:"filled",onKeyDown:function(e){"Enter"!==e.key||e.getModifierState("Shift")||(e.preventDefault(),_())},value:s,onChange:function(e){return m(e.target.value)},InputProps:{endAdornment:u.a.createElement(he.a,{position:"end"},u.a.createElement(U.a,{"aria-label":"toggle visibility",disabled:j>0,onClick:function(){return C?g(-1):S(!0)}},u.a.createElement(Ie.a,{color:C?"secondary":void 0})))}}),u.a.createElement(F.a,{className:c.button,variant:"contained",color:"primary",onClick:_},"Send",u.a.createElement(be.a,{className:c.rightIcon}))),u.a.createElement(Ce,{open:b,handleClose:function(){return S(!1)},onTimerChange:g}))},je=u.a.createContext(),ke=je.Provider;je.Consumer;var Ae=function(e){var t=e.dmId,a=void 0===t?"":t,r=u.a.useState([]),l=Object(n.a)(r,2),c=l[0],o=l[1],i=u.a.useState({dmId:a,isPaginating:!1,currentStart:0,currentEnd:0,sliceStart:0}),s=Object(n.a)(i,2),m=s[0],E=s[1],d=u.a.useContext(h),f=function(){var e=m.dmId===a?m:{dmId:a,isPaginating:!1,currentStart:0,currentEnd:0,sliceStart:0};q("GET","DM_MESSAGES",{token:d,dmId:Number.parseInt(a),start:e.isPaginating?e.currentStart:0}).then((function(t){var n=t.data,r=n.messages,l=n.end;E(Object(v.a)(Object(v.a)({},e),{},{dmId:a,currentEnd:l})),o(r)})).catch((function(e){return console.log(e)}))};Z(f,[a,m.currentStart]);var g=m.currentStart,p=m.currentEnd,b=m.sliceStart,S=m.isPaginating,I=-1==p&&b>=c.length-10,O=c.filter((function(e){return e.isPinned})),y=c.length?"Messages [".concat(g+b+1,"...").concat(Math.min(g+c.length,g+b+10),"]"):"Messages (None)";return u.a.createElement(ke,{value:f},O.length>0&&u.a.createElement(u.a.Fragment,null,u.a.createElement("hr",null),u.a.createElement(M.a,{subheader:u.a.createElement(D.a,null,"Pinned Messages")},O.map((function(e){return u.a.createElement(Ke,Object.assign({key:e.messageId},e))})))),u.a.createElement("hr",null),u.a.createElement(M.a,{subheader:u.a.createElement(D.a,null,y),style:{width:"100%"}},!I&&u.a.createElement(w.a,null,u.a.createElement(F.a,{variant:"outlined",color:"secondary",onClick:function(){return E((function(e){var t=e.sliceStart,a=e.currentStart,n=e.currentEnd,r=Object(k.a)(e,["sliceStart","currentStart","currentEnd"]);return t+10<c.length?Object(v.a)(Object(v.a)({},r),{},{currentStart:a,currentEnd:n,sliceStart:t+10,isPaginating:!0}):Object(v.a)(Object(v.a)({},r),{},{currentEnd:n,currentStart:n,sliceStart:0,isPaginating:!0})}))}},"Previous messages")),c.slice(b,b+10).reverse().map((function(e){return u.a.createElement(Ke,Object.assign({key:e.messageId},e))})),S&&u.a.createElement(w.a,null,u.a.createElement(F.a,{variant:"outlined",color:"secondary",onClick:function(){return E((function(e){var t=e.sliceStart,a=e.currentStart,n=Object(k.a)(e,["sliceStart","currentStart"]);return t>=10?Object(v.a)(Object(v.a)({},n),{},{currentStart:a,sliceStart:t-10,isPaginating:!(0==a&&10==t)}):a>=50&&a?Object(v.a)(Object(v.a)({},n),{},{currentStart:a-50,sliceStart:40}):Object(v.a)(Object(v.a)({},n),{},{currentStart:0,sliceStart:0,isPaginating:!1})}))}},"Next messages"))),u.a.createElement(Ne,{dmId:a}))};var Me=function(e){var t=e.messageId,a=e.disabled,n=void 0!==a&&a,r=u.a.useContext(h),l=u.a.useContext(Ye),c=u.a.useContext(je);return l=l||function(){},c=c||function(){},u.a.createElement(U.a,{disabled:n,onClick:function(){var e=prompt();null!==e&&(""!==e?q("PUT","MESSAGE_EDIT",{token:r,messageId:Number.parseInt(t),message:e}).then((function(){l(),c()})).catch((function(e){return console.log(e)})):q("DELETE","MESSAGE_REMOVE",{token:r,messageId:Number.parseInt(t)}).then((function(){l(),c()})).catch((function(e){return console.log(e)})))},style:{margin:1},size:"small",edge:"end","aria-label":"delete"},u.a.createElement(ge.a,{fontSize:"small"}))},De=a(377),we=a(114),Le=a(113),_e=a.n(Le);var Re=Object(De.a)((function(e){var t=e.messageId,a=e.isPinned,r=void 0!==a&&a,l=e.theme,c=u.a.useState(r),o=Object(n.a)(c,2),i=o[0],s=o[1];u.a.useEffect((function(){return s(r)}),[r]);var m=u.a.useContext(h),E=u.a.useContext(Ye),d=u.a.useContext(je);return E=E||function(){},d=d||function(){},u.a.createElement(U.a,{onClick:function(){i?q("POST","MESSAGE_UNPIN",{token:m,messageId:Number.parseInt(t)}).then((function(){E(),d()})).catch((function(e){return console.log(e)})):q("POST","MESSAGE_PIN",{token:m,messageId:Number.parseInt(t)}).then((function(){E(),d()})).catch((function(e){return console.log(e)}))},style:{margin:1},size:"small",edge:"end","aria-label":"delete"},i?u.a.createElement(_e.a,{path:we.a,size:"1em",color:l&&l.palette.action.active}):u.a.createElement(_e.a,{path:we.b,size:"1em",color:l&&l.palette.action.active}))})),Pe=a(378),xe=a(158),Ue=a.n(xe),Fe=a(159),He=a.n(Fe);var Ge=function(e){var t=e.messageId,a=e.reacts,n=void 0===a?[]:a,r=u.a.useContext(h),l=u.a.useContext(Ye),c=u.a.useContext(je);l=l||function(){},c=c||function(){};var o=0,i=!1,s=n.findIndex((function(e){return 1===e.reactId}));return-1!==s&&(o=n[s].uIds.length,i=n[s].isThisUserReacted),u.a.createElement(Pe.a,{anchorOrigin:{horizontal:"right",vertical:"bottom"},badgeContent:o,color:"secondary"},u.a.createElement(U.a,{onClick:function(){return function(e){e?q("POST","MESSAGE_UNREACT",{token:r,messageId:Number.parseInt(t),reactId:1}).then((function(){l(),c()})).catch((function(e){return console.log(e)})):q("POST","MESSAGE_REACT",{token:r,messageId:Number.parseInt(t),reactId:1}).then((function(){l(),c()})).catch((function(e){return console.log(e)}))}(i)},style:{margin:1},size:"small",edge:"end","aria-label":"delete"},i?u.a.createElement(Ue.a,{fontSize:"small"}):u.a.createElement(He.a,{fontSize:"small"})))},We=a(160),Ve=a.n(We);var ze=function(e){var t=e.messageId,a=e.disabled,n=void 0!==a&&a,r=u.a.useContext(h),l=u.a.useContext(Ye),c=u.a.useContext(je);return l=l||function(){},c=c||function(){},u.a.createElement(U.a,{disabled:n,onClick:function(){q("DELETE","MESSAGE_REMOVE",{token:r,messageId:Number.parseInt(t)}).then((function(){l(),c()}))},style:{margin:1},size:"small",edge:"end","aria-label":"delete"},u.a.createElement(Ve.a,{fontSize:"small"}))},qe=a(161),Be=a.n(qe);var Je=function(e){var t=e.ogMessageId,a=(Object(k.a)(e,["ogMessageId"]),u.a.useState(!1)),r=Object(n.a)(a,2),l=r[0],c=r[1],o=u.a.useState(-1),i=Object(n.a)(o,2),s=i[0],m=i[1],E=u.a.useState(-1),d=Object(n.a)(E,2),f=d[0],g=d[1],p=u.a.useState(""),v=Object(n.a)(p,2),b=v[0],S=v[1],I=u.a.useState([]),O=Object(n.a)(I,2),y=O[0],C=O[1],T=u.a.useState([]),N=Object(n.a)(T,2),j=N[0],A=N[1],M=u.a.useState(""),D=Object(n.a)(M,2),w=D[0],L=D[1],_=u.a.useContext(h),R=Z();function P(){c(!1)}return u.a.useEffect((function(){q("GET","CHANNELS_LIST",{token:_}).then((function(e){var t=e.data;C(t.channels)})).catch((function(e){return console.log(e)})),q("GET","DM_LIST",{token:_}).then((function(e){var t=e.data;A(t.dms)})).catch((function(e){return console.log(e)}))}),[_]),u.a.createElement("div",null,u.a.createElement(U.a,{onClick:function(){c(!0)},style:{margin:1},size:"small",edge:"end","aria-label":"share"},u.a.createElement(Be.a,{fontSize:"small"})),u.a.createElement(re.a,{open:l,onClose:P,"aria-labelledby":"form-dialog-title"},u.a.createElement(le.a,{id:"form-dialog-title"},"Share message"),u.a.createElement("form",{onSubmit:function(e){e.preventDefault(),q("POST","MESSAGE_SHARE",{token:_,ogMessageId:Number.parseInt(t),message:w,channelId:Number.parseInt(s),dmId:Number.parseInt(f)}).then((function(e){console.log(e),R()})).catch((function(e){return console.log(e)}))}},u.a.createElement(ce.a,null,u.a.createElement(oe.a,null,"Enter a channel below to share the message to"),u.a.createElement(ie.a,{style:{width:"100%"},id:"u_id",onChange:function(e){S(e.target.value),"d"===e.target.value.slice(0,1)?(g(e.target.value.slice(1)),m(-1)):(m(e.target.value.slice(1)),g(-1))},value:b},y.map((function(e){return u.a.createElement(ue.a,{key:e.channelId,value:"c".concat(e.channelId)},e.name)})),j.map((function(e){return u.a.createElement(ue.a,{key:e.dmId,value:"d".concat(e.dmId)},e.name)}))),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement(oe.a,null,"Optionally, enter an additional message"),u.a.createElement(pe.a,{multiline:!0,fullWidth:!0,rowsMax:4,value:w,onChange:function(e){L(e.target.value)}})),u.a.createElement(se.a,null,u.a.createElement(F.a,{onClick:P,color:"primary"},"Cancel"),u.a.createElement(F.a,{onClick:P,type:"submit",color:"primary"},"Share")))))};var Ke=function(e){var t=e.messageId,a=e.message,r=void 0===a?"":a,l=e.uId,c=e.timeSent,o=e.isPinned,i=void 0!==o&&o,s=e.reacts,m=void 0===s?[]:s,E=u.a.useState(),d=Object(n.a)(E,2),f=d[0],g=d[1],p=u.a.useState(),v=Object(n.a)(p,2),b=v[0],S=v[1],I=u.a.useState(),O=Object(n.a)(I,2),y=O[0],C=O[1],T=u.a.useContext(h),N=[f,b].filter((function(e){return null!=e&&""!==e})).join(" "),j=[f,b].filter((function(e){return null!=e&&""!==e})).map((function(e){return e[0]})).join("");return u.a.useEffect((function(){g(),S(),C(),q("GET","USER_PROFILE",{token:T,uId:l}).then((function(e){var t=e.data.user,a=t.nameFirst,n=void 0===a?"":a,r=t.nameLast,l=void 0===r?"":r,c=t.profileImgUrl,o=void 0===c?"":c;g(n),S(l),C("".concat(o))})).catch((function(e){return console.log(e)}))}),[t,T,l]),u.a.createElement(w.a,{key:t,style:{width:"100%"}},r&&u.a.createElement(u.a.Fragment,null,u.a.createElement(L.a,null,u.a.createElement(_.a,{style:{width:"50px",height:"50px",border:"1px solid #ccc"},src:y},j)),u.a.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center"}},u.a.createElement(R.a,{primary:u.a.createElement(u.a.Fragment,null,u.a.createElement("span",null,N),u.a.createElement("span",{style:{paddingLeft:10,fontSize:10}},de()(1e3*c))),secondary:u.a.createElement("div",null,u.a.createElement("pre",{style:{fontFamily:"inherit"}},r))}),u.a.createElement("div",{style:{display:"flex",height:30,marginLeft:20}},u.a.createElement(Ge,{messageId:t,reacts:m,uId:l}),u.a.createElement(Re,{messageId:t,isPinned:i}),u.a.createElement(Je,{ogMessageId:t}),u.a.createElement(Me,{messageId:t}),u.a.createElement(ze,{messageId:t})))))},Ye=u.a.createContext(),Qe=Ye.Provider;Ye.Consumer;var $e=function(e){var t=e.channelId,a=void 0===t?"":t,r=u.a.useState([]),l=Object(n.a)(r,2),c=l[0],o=l[1],i=u.a.useState({channelId:a,isPaginating:!1,currentStart:0,currentEnd:0,sliceStart:0}),s=Object(n.a)(i,2),m=s[0],E=s[1],d=u.a.useContext(h),f=function(){var e=m.channelId===a?m:{channelId:a,isPaginating:!1,currentStart:0,currentEnd:0,sliceStart:0};q("GET","CHANNEL_MESSAGES",{token:d,channelId:Number.parseInt(a),start:e.isPaginating?e.currentStart:0}).then((function(t){var n=t.data,r=n.messages,l=n.end;E(Object(v.a)(Object(v.a)({},e),{},{channelId:a,currentEnd:l})),o(r)})).catch((function(e){return console.log(e)}))};Z(f,[a,m.currentStart]);var g=m.currentStart,p=m.currentEnd,b=m.sliceStart,S=m.isPaginating,I=-1==p&&b>=c.length-10,O=c.filter((function(e){return e.isPinned})),y=c.length?"Messages [".concat(g+b+1,"...").concat(Math.min(g+c.length,g+b+10),"]"):"Messages (None)";return u.a.createElement(Qe,{value:f},O.length>0&&u.a.createElement(u.a.Fragment,null,u.a.createElement("hr",null),u.a.createElement(M.a,{subheader:u.a.createElement(D.a,null,"Pinned Messages")},O.map((function(e){return u.a.createElement(Ke,Object.assign({key:e.messageId},e))})))),u.a.createElement("hr",null),u.a.createElement(M.a,{subheader:u.a.createElement(D.a,null,y),style:{width:"100%"}},!I&&u.a.createElement(w.a,null,u.a.createElement(F.a,{variant:"outlined",color:"secondary",onClick:function(){return E((function(e){var t=e.sliceStart,a=e.currentStart,n=e.currentEnd,r=Object(k.a)(e,["sliceStart","currentStart","currentEnd"]);return t+10<c.length?Object(v.a)(Object(v.a)({},r),{},{currentStart:a,currentEnd:n,sliceStart:t+10,isPaginating:!0}):Object(v.a)(Object(v.a)({},r),{},{currentEnd:n,currentStart:n,sliceStart:0,isPaginating:!0})}))}},"Previous messages")),c.slice(b,b+10).reverse().map((function(e){return u.a.createElement(Ke,Object.assign({key:e.messageId},e))})),S&&u.a.createElement(w.a,null,u.a.createElement(F.a,{variant:"outlined",color:"secondary",onClick:function(){return E((function(e){var t=e.sliceStart,a=e.currentStart,n=Object(k.a)(e,["sliceStart","currentStart"]);return t>=10?Object(v.a)(Object(v.a)({},n),{},{currentStart:a,sliceStart:t-10,isPaginating:!(0==a&&10==t)}):a>=50&&a?Object(v.a)(Object(v.a)({},n),{},{currentStart:a-50,sliceStart:40}):Object(v.a)(Object(v.a)({},n),{},{currentStart:0,sliceStart:0,isPaginating:!1})}))}},"Next messages"))),u.a.createElement(Ne,{channelId:a}))};var Xe=function(e){var t=e.channelId,a=(Object(k.a)(e,["channelId"]),u.a.useState(!0)),r=Object(n.a)(a,2),l=r[0],c=r[1],o=u.a.useState(""),i=Object(n.a)(o,2),s=i[0],m=i[1],E=u.a.useState([]),d=Object(n.a)(E,2),f=d[0],g=d[1],p=u.a.useState([]),v=Object(n.a)(p,2),b=v[0],S=v[1],I=u.a.useContext(h),O=K();function y(){q("GET","CHANNEL_DETAILS",{token:I,channelId:t}).then((function(e){var t=e.data,a=t.name,n=t.ownerMembers,r=t.allMembers;g(r),S(n),m(a)})).catch((function(e){console.log(e),g([]),S([]),m("")})).finally((function(){return c(!1)}))}function C(e){return void 0!==e.find((function(e){return J(e.uId,O)}))}function T(e,t){return void 0!==e.find((function(e){return J(e.uId,t)}))}Z(y,[t,I],2);var N=C(f);return u.a.createElement(u.a.Fragment,null,l?u.a.createElement(ne,null):u.a.createElement(u.a.Fragment,null,u.a.createElement(A.a,{variant:"h4"},s.toUpperCase()),u.a.createElement(M.a,{subheader:u.a.createElement(D.a,null,"Members")},f.map((function(e){var a=e.uId,n=e.nameFirst,r=e.nameLast,l=e.profileImgUrl;return u.a.createElement(w.a,{key:a},u.a.createElement(L.a,null,u.a.createElement(_.a,{style:{width:"50px",height:"50px",border:"1px solid #ccc"},src:l},[n,r].filter((function(e){return null!=e&&""!==e})).map((function(e){return e[0]})).join(""))),u.a.createElement(R.a,{primary:u.a.createElement(u.a.Fragment,null,u.a.createElement(P.a,{container:!0,alignItems:"center",spacing:1},u.a.createElement(P.a,{item:!0},u.a.createElement(x.a,{href:"/profile/".concat(a)},"".concat(n," ").concat(r)),"".concat(T(b,a)?" \u2b50":" ")),u.a.createElement(P.a,{item:!0},T(b,a)?u.a.createElement(U.a,{size:"small",onClick:function(){return function(e){q("POST","CHANNEL_REMOVEOWNER",{token:I,channelId:Number.parseInt(t),uId:e}).then((function(){y()})).catch((function(e){return console.log(e)}))}(a)}},u.a.createElement(V.a,null)):u.a.createElement(U.a,{size:"small",onClick:function(){return function(e){q("POST","CHANNEL_ADDOWNER",{token:I,channelId:Number.parseInt(t),uId:e}).then((function(){y()})).catch((function(e){return console.log(e)}))}(a)}},u.a.createElement(G.a,null)))))}))})),u.a.createElement(w.a,{key:"invite_member"},C(f)?u.a.createElement(P.a,{container:!0,spacing:1},u.a.createElement(P.a,{item:!0},u.a.createElement(me,{channelId:t})),u.a.createElement(P.a,{item:!0},u.a.createElement(F.a,{variant:"outlined",onClick:function(){return function(e,t){q("POST","CHANNEL_LEAVE",{token:t,channelId:Number.parseInt(e)}).then((function(){y()})).catch((function(e){return console.log(e)}))}(t,I)}},"Leave Channel"))):u.a.createElement(F.a,{variant:"outlined",color:"primary",onClick:function(){return function(e,t){q("POST","CHANNEL_JOIN",{token:t,channelId:Number.parseInt(e)}).then((function(){y()})).catch((function(e){return console.log(e)}))}(t,I)}},"Join Channel"))),N&&u.a.createElement($e,{channelId:t})))},Ze=a(27),et=a(155),tt=Object(et.a)((function(e){var t;return{body:(t={},Object(Ze.a)(t,e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),Object(Ze.a)(t,"padding",20),t),toolbar:e.mixins.toolbar}}));var at=function(e){var t=e.children,a=tt();return u.a.createElement("div",{className:a.body},u.a.createElement("div",{className:a.toolbar}),t)},nt=a(389),rt=a(374),lt=a(20),ct=a(388),ot=a(167),it=a.n(ot),ut=a(151),st=a(404),mt=a(384),Et=a(401);var dt=function(e){var t=e.children,a=(Object(k.a)(e,["children"]),u.a.useState(!1)),r=Object(n.a)(a,2),l=r[0],c=r[1],o=u.a.useState(T),i=Object(n.a)(o,2),s=i[0],m=i[1],E=u.a.useState([]),d=Object(n.a)(E,2),f=d[0],g=d[1],p=u.a.useState(""),v=Object(n.a)(p,2),b=v[0],S=v[1],I=u.a.useContext(h);function O(){c(!1)}return u.a.useEffect((function(){q("GET","USERS_ALL",{token:I}).then((function(e){var t=e.data;g(t.users)})).catch((function(e){return console.log(e)}))}),[I]),u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{onClick:function(){c(!0)}},t),u.a.createElement(re.a,{open:l,onClose:O,"aria-labelledby":"form-dialog-title"},u.a.createElement(le.a,{id:"form-dialog-title"},"Set User Permissions"),u.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),e.target[0].value){var t=parseInt(e.target[0].value,10);q("POST","ADMIN_USERPERMISSION_CHANGE",{token:I,uId:Number.parseInt(t),permissionId:Number.parseInt(s)}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))}}},u.a.createElement(ce.a,null,u.a.createElement(oe.a,null,"Select a user below to set permissions for this user"),u.a.createElement(P.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center"},u.a.createElement(P.a,{item:!0,xs:12},u.a.createElement(ie.a,{style:{width:"100%"},id:"uId",onChange:function(e){var t=parseInt(e.target.value,10);S(t)},value:b},f.map((function(e,t){return u.a.createElement(ue.a,{key:e.uId,value:e.uId},e.nameFirst," ",e.nameLast)})))),u.a.createElement(P.a,{container:!0,item:!0,justify:"center",alignItems:"center"},u.a.createElement(st.a,{"aria-label":"position",name:"position",value:s,onChange:function(e){var t=parseInt(e.target.value,10);m(t)},row:!0},u.a.createElement(mt.a,{value:T,control:u.a.createElement(Et.a,{color:"primary"}),label:"Member",labelPlacement:"bottom"}),u.a.createElement(mt.a,{value:C,control:u.a.createElement(Et.a,{color:"primary"}),label:"Owner",labelPlacement:"bottom"}))))),u.a.createElement(se.a,null,u.a.createElement(F.a,{onClick:O,color:"primary"},"Cancel"),u.a.createElement(F.a,{onClick:O,type:"submit",color:"primary"},"Set")))))};var ft=function(e){var t=e.children,a=(Object(k.a)(e,["children"]),u.a.useState(!1)),r=Object(n.a)(a,2),l=r[0],c=r[1],o=u.a.useState([]),i=Object(n.a)(o,2),s=i[0],m=i[1],E=u.a.useState(""),d=Object(n.a)(E,2),f=d[0],g=d[1],p=u.a.useContext(h);function v(){c(!1)}return u.a.useEffect((function(){q("GET","USERS_ALL",{token:p}).then((function(e){var t=e.data;m(t.users)})).catch((function(e){return console.log(e)}))}),[p]),u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{onClick:function(){c(!0)}},t),u.a.createElement(re.a,{open:l,onClose:v,"aria-labelledby":"form-dialog-title"},u.a.createElement(le.a,{id:"form-dialog-title"},"Remove Users"),u.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),e.target[0].value){var t=parseInt(e.target[0].value,10);q("DELETE","ADMIN_USER_REMOVE",{token:p,uId:Number.parseInt(t)}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))}}},u.a.createElement(ce.a,null,u.a.createElement(oe.a,null,"Select a user below to remove"),u.a.createElement(P.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center"},u.a.createElement(P.a,{item:!0,xs:12},u.a.createElement(ie.a,{style:{width:"100%"},id:"uId",onChange:function(e){var t=parseInt(e.target.value,10);g(t)},value:f},s.map((function(e){return u.a.createElement(ue.a,{key:e.uId,value:e.uId},e.nameFirst," ",e.nameLast)})))))),u.a.createElement(se.a,null,u.a.createElement(F.a,{onClick:v,color:"primary"},"Cancel"),u.a.createElement(F.a,{onClick:v,type:"submit",color:"primary"},"Remove")))))};function gt(){var e=u.a.useState(!1),t=Object(n.a)(e,2),a=t[0],r=t[1],l=u.a.useRef(),c=function(){return r(!1)};return u.a.createElement("div",null,u.a.createElement(F.a,{ref:l,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){return r(!0)},color:"inherit"},"Admin"),u.a.createElement(ut.a,{id:"simple-menu",anchorEl:l.current,keepMounted:!0,open:a,onClose:c},u.a.createElement(dt,null,u.a.createElement(ue.a,{onClick:c},"Set User Permissions")),u.a.createElement(ft,null,u.a.createElement(ue.a,{onClick:c},"Remove Users")),u.a.createElement(ue.a,{onClick:c},"Close")))}function pt(){var e=u.a.useState(!1),t=Object(n.a)(e,2),a=t[0],r=t[1],l=u.a.useState([]),c=Object(n.a)(l,2),o=c[0],i=c[1],s=u.a.useRef(),m=u.a.useContext(h);u.a.useEffect((function(){q("GET","NOTIFICATIONS_GET",{token:m}).then((function(e){var t=e.data;i(t.notifications)})).catch((function(e){return console.log(e)}))}),[a,m]);var E=function(){return r(!1)};return u.a.createElement("div",null,u.a.createElement(F.a,{ref:s,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){return r(!0)},color:"inherit"},"Notifications"),u.a.createElement(ut.a,{id:"simple-menu",anchorEl:s.current,keepMounted:!0,open:a,onClose:E},0===o.length?u.a.createElement("div",null,"\xa0You don't have any notifications.\xa0"):o.map((function(e){return-1===e.dmId?u.a.createElement(ue.a,{component:d.b,to:"/channel/".concat(e.channelId)},e.notificationMessage):u.a.createElement(ue.a,{component:d.b,to:"/dm/".concat(e.dmId)},e.notificationMessage)})),u.a.createElement(ue.a,{onClick:E},"Close")))}var ht=a(385),vt=a(387),bt=a(330),St=a(331),It=a(115),Ot=a(386),yt=a(164),Ct=a.n(yt),Tt=["Live","Step"];var Nt=function(){var e=u.a.useState(!1),t=Object(n.a)(e,2),a=t[0],r=t[1],l=u.a.useRef(null),c=u.a.useState(ee?0:1),o=Object(n.a)(c,2),i=o[0],s=o[1];B((function(){ee&&X(te++)}),2e3);var m=function(e,t){ee=!!(0===t),s(t),r(!1)},E=function(e){l.current&&l.current.contains(e.target)||r(!1)};return u.a.createElement(u.a.Fragment,null,u.a.createElement(ht.a,{variant:"contained",color:"primary",ref:l,"aria-label":"split button",style:{marginRight:15}},u.a.createElement(F.a,{onClick:function(){X()},disabled:0===i},Tt[i]),u.a.createElement(F.a,{color:"primary",size:"small","aria-owns":a?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){r((function(e){return!e}))}},u.a.createElement(Ct.a,null))),u.a.createElement(Ot.a,{open:a,anchorEl:l.current,transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,a=e.placement;return u.a.createElement(bt.a,Object.assign({},t,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}}),u.a.createElement(It.a,{id:"menu-list-grow"},u.a.createElement(vt.a,{onClickAway:E},u.a.createElement(St.a,null,Tt.map((function(e,t){return u.a.createElement(ue.a,{key:e,disabled:2===t,selected:t===i,onClick:function(e){return m(0,t)}},e)}))))))})))},jt=a(178),kt=a(15),At=a(166),Mt=a.n(At),Dt=Object(et.a)((function(e){return{search:Object(Ze.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(kt.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(kt.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto",marginRight:e.spacing(2)}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(Ze.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}}));var wt=Object(f.g)((function(e){var t=Dt(),a=u.a.useState(""),r=Object(n.a)(a,2),l=r[0],c=r[1];return u.a.createElement("form",{onSubmit:function(){return e.history.push("/search/".concat(l))}},u.a.createElement("div",{className:t.search},u.a.createElement("div",{className:t.searchIcon},u.a.createElement(Mt.a,null)),u.a.createElement(jt.a,{placeholder:"Search\u2026",classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"},value:l,onChange:function(e){return c(e.target.value)}})))})),Lt=Object(et.a)((function(e){return{appBar:Object(Ze.a)({marginLeft:240},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},logoutButton:{float:"right"}}}));var _t=function(e){var t=e.handleMenuToggle,a=void 0===t?function(){}:t,r=Lt(),l=Object(lt.a)(),c=Object(ct.a)(l.breakpoints.up("sm")),o=u.a.useContext(h),i=u.a.useState(!1),s=Object(n.a)(i,2),m=s[0],E=s[1];return m?(q("POST","AUTH_LOGOUT",{token:o}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)})),localStorage.removeItem("token"),localStorage.removeItem("uId"),u.a.createElement(f.a,{to:"/login"})):u.a.createElement(nt.a,{position:"fixed",className:r.appBar},u.a.createElement(rt.a,null,!c&&u.a.createElement(u.a.Fragment,null,u.a.createElement(U.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:a,className:r.menuButton},u.a.createElement(it.a,null)),u.a.createElement(d.b,{to:"/",style:{color:"white",textDecoration:"none"}},u.a.createElement(A.a,{variant:"h5",noWrap:!0},"Memes"))),u.a.createElement("div",{variant:"h6",className:r.title}),u.a.createElement("div",{style:{display:"flex"}},u.a.createElement(wt,null),u.a.createElement(Nt,null),u.a.createElement(pt,null),u.a.createElement(gt,null),u.a.createElement(F.a,{color:"inherit",className:r.logoutButton,onClick:function(){E(!0)}},"Logout"))))},Rt=a(402),Pt=a(405),xt=a(390),Ut=Object(et.a)((function(e){return{drawer:Object(Ze.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),drawerPaper:{width:240},toolbar:Object(v.a)(Object(v.a)({},e.mixins.toolbar),{},{display:"flex",alignItems:"center",paddingLeft:e.spacing(2)})}}));var Ft=function(e){var t=e.container,a=e.children,n=e.open,r=e.setOpen,l=Ut(),c=Object(lt.a)();return u.a.createElement("nav",{className:l.drawer,"aria-label":"channels"},u.a.createElement(Rt.a,{smUp:!0,implementation:"css"},u.a.createElement(Pt.a,{container:t,variant:"temporary",anchor:"rtl"===c.direction?"right":"left",open:n,onClose:function(){return r(!1)},classes:{paper:l.drawerPaper},ModalProps:{keepMounted:!0}},u.a.createElement("div",{className:l.toolbar}),u.a.createElement(xt.a,null),a)),u.a.createElement(Rt.a,{xsDown:!0,implementation:"css"},u.a.createElement(Pt.a,{classes:{paper:l.drawerPaper},variant:"permanent",open:!0},u.a.createElement("div",{className:l.toolbar},u.a.createElement(d.b,{to:"/",style:{color:"black",textDecoration:"none"}},u.a.createElement(A.a,{variant:"h5",noWrap:!0},"Treats"))),a)))};var Ht=function(e){var t=e.menu,a=e.body,r=u.a.useState(!1),l=Object(n.a)(r,2),c=l[0],o=l[1];return u.a.createElement("div",{style:{display:"flex"}},u.a.createElement(_t,{handleMenuToggle:function(){o((function(e){return!e}))}}),u.a.createElement(Ft,{open:c,setOpen:o},t),u.a.createElement(at,null,a))},Gt=a(392),Wt=a(70),Vt=a.n(Wt),zt=a(71),qt=a.n(zt),Bt=a(391),Jt=a(96),Kt=a.n(Jt),Yt=a(168),Qt=a.n(Yt),$t=a(169),Xt=a.n($t);var Zt=function(e){var t=Object.assign({},e),a=u.a.useState(!1),r=Object(n.a)(a,2),l=r[0],c=r[1],o=u.a.useContext(h);function i(){c(!1)}return u.a.createElement("div",null,u.a.createElement(U.a,{size:"small",onClick:function(){c(!0)}},u.a.createElement(Kt.a,null)),u.a.createElement(re.a,{open:l,onClose:i,"aria-labelledby":"form-dialog-title"},u.a.createElement(le.a,{id:"form-dialog-title"},"Create Channel"),u.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=e.target[0].value,n=e.target[1].checked;a&&q("POST","CHANNELS_CREATE",{token:o,name:a,isPublic:!n}).then((function(e){console.log(e),t.callback()})).catch((function(e){return console.log(e)}))}},u.a.createElement(ce.a,null,u.a.createElement(oe.a,null,"Complete the form below to create a new channel"),u.a.createElement(P.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"center"},u.a.createElement(P.a,{item:!0,xs:12},u.a.createElement(pe.a,{autoFocus:!0,margin:"dense",id:"channelName",label:"Channel Name",name:"channelName",fullWidth:!0})),u.a.createElement(P.a,{container:!0,item:!0,justify:"center",alignItems:"center"},u.a.createElement(Qt.a,null),u.a.createElement(mt.a,{control:u.a.createElement(Bt.a,{value:"secret",inputProps:{"aria-label":"Secret"}}),label:"Secret",labelPlacement:"top"}),u.a.createElement(Xt.a,null)))),u.a.createElement(se.a,null,u.a.createElement(F.a,{onClick:i,color:"primary"},"Cancel"),u.a.createElement(F.a,{onClick:i,type:"submit",color:"primary"},"Create")))))};var ea=function(e){var t=e.channelId,a=u.a.useState([]),r=Object(n.a)(a,2),l=r[0],c=r[1],o=u.a.useState([]),i=Object(n.a)(o,2),s=i[0],m=i[1],E=u.a.useContext(h),f=function(){var e=q("GET","CHANNELS_LIST",{token:E}),t=q("GET","CHANNELS_LISTALL",{token:E});S.a.all([e,t]).then(S.a.spread((function(e,t){var a=e.data.channels,n=t.data.channels.filter((function(e){return void 0===a.find((function(t){return t.channelId===e.channelId}))}));c(a),m(n)})))};return Z(f,[],2),u.a.createElement(u.a.Fragment,null,u.a.createElement(M.a,{subheader:u.a.createElement(D.a,{style:{display:"flex"}},u.a.createElement("span",{style:{flex:1}},"My Channels"),u.a.createElement(Zt,{callback:f}))},l.map((function(e,a){var n=e.channelId,r=e.name;return u.a.createElement(w.a,{button:!0,key:n,component:d.b,to:"/channel/".concat(n)},u.a.createElement(Gt.a,null,n==t?u.a.createElement(Vt.a,null):u.a.createElement(qt.a,null)),u.a.createElement(R.a,{primary:r}))}))),u.a.createElement(M.a,{subheader:u.a.createElement(D.a,null,"Other Channels")},s.map((function(e,a){var n=e.channelId,r=e.name;return u.a.createElement(w.a,{button:!0,key:n,component:d.b,to:"/channel/".concat(n)},u.a.createElement(Gt.a,null,n==t?u.a.createElement(Vt.a,null):u.a.createElement(qt.a,null)),u.a.createElement(R.a,{primary:r}))}))))},ta=a(370),aa={PaperProps:{style:{maxHeight:224,width:250}}};var na=function(e){var t=Object.assign({},e),a=u.a.useState(!1),r=Object(n.a)(a,2),l=r[0],c=r[1],o=u.a.useState([]),i=Object(n.a)(o,2),s=i[0],m=i[1],E=u.a.useState([]),d=Object(n.a)(E,2),f=d[0],g=d[1],p=u.a.useContext(h),v=K();function b(){c(!1)}return u.a.useEffect((function(){q("GET","USERS_ALL",{token:p}).then((function(e){var t=e.data;g(t.users)})).catch((function(e){return console.log(e)}))}),[p]),u.a.createElement("div",null,u.a.createElement(U.a,{size:"small",onClick:function(){c(!0)}},u.a.createElement(Kt.a,null)),u.a.createElement(re.a,{open:l,onClose:b,"aria-labelledby":"form-dialog-title"},u.a.createElement(le.a,{id:"form-dialog-title"},"Create Dm"),u.a.createElement("form",{onSubmit:function(e){e.preventDefault(),q("POST","DM_CREATE",{token:p,uIds:s}).then((function(e){console.log(e),t.callback()})).catch((function(e){return console.log(e)}))}},u.a.createElement(ce.a,null,u.a.createElement(oe.a,null,"Select the users below to create a new dm"),u.a.createElement(ie.a,{multiple:!0,value:s,onChange:function(e){m(e.target.value)},input:u.a.createElement(ta.a,null),MenuProps:aa,style:{width:"100%"}},f.map((function(e){if(v!=e.uId)return u.a.createElement(ue.a,{key:e.uId,value:e.uId},e.nameFirst+" "+e.nameLast)})))),u.a.createElement(se.a,null,u.a.createElement(F.a,{onClick:b,color:"primary"},"Cancel"),u.a.createElement(F.a,{onClick:b,type:"submit",color:"primary"},"Create")))))};var ra=function(e){var t=e.dmId,a=u.a.useState([]),r=Object(n.a)(a,2),l=r[0],c=r[1],o=u.a.useContext(h),i=function(){q("GET","DM_LIST",{token:o}).then((function(e){var t=e.data;c(t.dms)})).catch((function(e){return console.log(e)}))};return Z(i,[],2),u.a.createElement(u.a.Fragment,null,u.a.createElement(M.a,{subheader:u.a.createElement(D.a,{style:{display:"flex"}},u.a.createElement("span",{style:{flex:1}},"My Dms"),u.a.createElement(na,{callback:i}))},l.map((function(e){var a=e.dmId,n=e.name;return u.a.createElement(w.a,{button:!0,key:a,component:d.b,to:"/dm/".concat(a)},u.a.createElement(Gt.a,null,a==t?u.a.createElement(Vt.a,null):u.a.createElement(qt.a,null)),u.a.createElement(R.a,{primary:n}))}))))},la=a(170),ca=a.n(la);var oa=function(){var e=K(u.a.useContext(h));return u.a.createElement(M.a,null,u.a.createElement(w.a,{button:!0,key:"profile",component:d.b,to:"/profile/".concat(e)},u.a.createElement(Gt.a,null,u.a.createElement(ca.a,null)),u.a.createElement(R.a,{primary:"Profile"})))};var ia=function(e){var t=e.channelId,a=e.dmId;return u.a.createElement(u.a.Fragment,null,u.a.createElement(oa,null),u.a.createElement(ea,{channelId:t}),u.a.createElement(ra,{dmId:a}))};var ua=function(e){var t=e.match.params.channelId;return u.a.createElement(Ht,{menu:u.a.createElement(ia,{channelId:t,dmId:null}),body:u.a.createElement(Xe,{channelId:t})})};var sa=function(e){var t=e.dmId,a=(Object(k.a)(e,["dmId"]),u.a.useState(!0)),r=Object(n.a)(a,2),l=r[0],c=r[1],o=u.a.useState(""),i=Object(n.a)(o,2),s=i[0],m=i[1],E=u.a.useState([]),d=Object(n.a)(E,2),f=d[0],g=d[1],p=u.a.useContext(h);function v(){q("GET","DM_DETAILS",{token:p,dmId:t}).then((function(e){var t=e.data,a=t.name,n=t.members;console.log(n),g(n),m(a)})).catch((function(e){console.log(e),g([]),m("")})).finally((function(){return c(!1)}))}return Z(v,[t,p],2),u.a.createElement(u.a.Fragment,null,l?u.a.createElement(ne,null):u.a.createElement(u.a.Fragment,null,u.a.createElement(A.a,{variant:"h4"},s.toUpperCase()),u.a.createElement(M.a,{subheader:u.a.createElement(D.a,null,"Members")},f.map((function(e){var t=e.uId,a=e.nameFirst,n=e.nameLast,r=e.profileImgUrl;return u.a.createElement(w.a,{key:t},u.a.createElement(L.a,null,u.a.createElement(_.a,{style:{width:"50px",height:"50px",border:"1px solid #ccc"},src:r},[a,n].filter((function(e){return null!=e&&""!==e})).map((function(e){return e[0]})).join(""))),u.a.createElement(R.a,{primary:u.a.createElement(u.a.Fragment,null,u.a.createElement(P.a,{container:!0,alignItems:"center",spacing:1},u.a.createElement(P.a,{item:!0},u.a.createElement(x.a,{href:"/profile/".concat(t)},"".concat(a," ").concat(n)))))}))})),u.a.createElement(w.a,{key:"leave_dm"},u.a.createElement(P.a,{container:!0,spacing:1},u.a.createElement(P.a,{item:!0},u.a.createElement(F.a,{variant:"outlined",onClick:function(){return function(e,t){q("POST","DM_LEAVE",{token:t,dmId:Number.parseInt(e)}).then((function(){v()})).catch((function(e){return console.log(e)}))}(t,p)}},"Leave Dm"),"\xa0",u.a.createElement(F.a,{variant:"outlined",onClick:function(){return function(e,t){q("DELETE","DM_REMOVE",{token:t,dmId:Number.parseInt(e)}).then((function(){v()})).catch((function(e){return console.log(e)}))}(t,p)}},"Remove Dm"))))),u.a.createElement(Ae,{dmId:t})))};var ma=function(e){var t=e.match.params.dmId;return u.a.createElement(Ht,{menu:u.a.createElement(ia,{channelId:null,dmId:t}),body:u.a.createElement(sa,{dmId:t})})},Ea=a(393),da=a(398),fa=a(62),ga=a.n(fa),pa=Object(et.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.primary.light}},card:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",borderRadius:e.shape.borderRadius}}}));var ha=function(e){var t=u.a.useState(!1),a=Object(n.a)(t,2),r=a[0],l=a[1],c=pa();return u.a.createElement(Ea.a,{component:"main",maxWidth:"sm"},u.a.createElement(da.a,{boxShadow:3,className:c.card},u.a.createElement(_.a,null,u.a.createElement(ga.a,{color:"secondary"})),u.a.createElement(A.a,{component:"h1",variant:"h5"},"Forgot Password"),r?u.a.createElement("div",{style:{marginTop:"64px"}},u.a.createElement(ne,null)):u.a.createElement("form",{noValidate:!0,onSubmit:function(t){t.preventDefault();var a=t.target[0].value;a&&(l(!0),q("POST","AUTH_PASSWORDRESET_REQUEST",{email:a}).then((function(t){console.log(t),e.history.push("/reset_password")})).catch((function(e){return console.log(e)})).finally((function(){return l(!1)})))}},u.a.createElement(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",type:"email",autoFocus:!0}),u.a.createElement(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Send Recovery Email"),u.a.createElement(P.a,{container:!0},u.a.createElement(P.a,{item:!0},u.a.createElement("br",null),u.a.createElement(x.a,{href:"/login",variant:"body1"},"Remember your password? Login"))))))},va=a(97);var ba=function(){var e=u.a.useContext(h),t=u.a.useState(0),a=Object(n.a)(t,2),r=a[0],l=a[1],c=u.a.useState([]),o=Object(n.a)(c,2),i=o[0],s=o[1],m=u.a.useState([]),E=Object(n.a)(m,2),d=E[0],f=E[1],g=u.a.useState([]),p=Object(n.a)(g,2),v=p[0],b=p[1];return u.a.useEffect((function(){q("GET","USERS_STATS",{token:e}).then((function(e){var t=e.data;console.log(t);var a=t.workspaceStats;l(a.utilizationRate),s(a.channelsExist.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numChannelsExist}}))),f(a.dmsExist.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numDmsExist}}))),b(a.messagesExist.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numMessagesExist}})))})).catch((function(e){return console.log(e)}))}),[e]),u.a.createElement(u.a.Fragment,null,u.a.createElement(A.a,{variant:"h5"},"Workspace statistics"),u.a.createElement("p",null,"Wow! ",(100*r).toFixed(2),"% utilisation"),u.a.createElement(va.Scatter,{data:{datasets:[{label:"Channels",data:i,fill:!1,borderColor:"#742774",showLine:!0},{label:"Dms",data:d,fill:!1,borderColor:"#4287f5",showLine:!0},{label:"Messages",data:v,fill:!1,borderColor:"#bd2d4f",showLine:!0}]},options:{scales:{xAxes:[{title:"time",type:"time",gridLines:{lineWidth:2},time:{unitStepSize:200,displayFormats:{millisecond:"MMM DD HH:mm",second:"MMM DD HH:mm",minute:"MMM DD HH:mm",hour:"MMM DD HH:mm",day:"MMM DD",week:"MMM DD",month:"MMM DD",quarter:"MMM DD",year:"MMM DD"}}}]}}}))};var Sa=function(){return u.a.createElement(Ht,{menu:u.a.createElement(ia,null),body:u.a.createElement(u.a.Fragment,null,u.a.createElement(A.a,{variant:"h4"},"WELCOME"),u.a.createElement("div",{style:{paddingTop:15}},u.a.createElement(A.a,{variant:"body1"},"This is Memes: agile messaging for Software Engineers")),u.a.createElement("br",null),u.a.createElement(ba,null))})},Ia=a(171),Oa=a.n(Ia),ya=Object(et.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.primary.light}},card:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",borderRadius:e.shape.borderRadius}}}));var Ca=function(e){var t=e.setAuth,a=Object(k.a)(e,["setAuth"]),r=u.a.useState(!1),l=Object(n.a)(r,2),c=l[0],o=l[1],i=ya();return u.a.createElement(Ea.a,{component:"main",maxWidth:"sm"},u.a.createElement(da.a,{boxShadow:3,className:i.card},u.a.createElement(_.a,null,u.a.createElement(Oa.a,null)),u.a.createElement(A.a,{component:"h1",variant:"h5"},"Login"),c?u.a.createElement("div",{style:{marginTop:"64px"}},u.a.createElement(ne,null)):u.a.createElement("form",{noValidate:!0,onSubmit:function(e){e.preventDefault();var n=e.target[0].value,r=e.target[2].value;n&&r&&(o(!0),q("POST","AUTH_LOGIN",{email:n,password:r}).then((function(e){console.log(e);var n=e.data;t(n.token,n.authUserId),a.history.push("/")})).catch((function(e){return console.log(e)})).finally((function(){return o(!1)})))}},u.a.createElement(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",type:"text",autoFocus:!0}),u.a.createElement(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),u.a.createElement("div",{className:"password-warning"},"Passwords are not securely stored.",u.a.createElement("br",null),"Do not enter any currently used passwords."),u.a.createElement(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign In"),u.a.createElement(P.a,{container:!0,direction:"column",alignItems:"center"},u.a.createElement(P.a,{item:!0},u.a.createElement("br",null),u.a.createElement(x.a,{href:"/register",variant:"body1"},"Don't have an account? Register")),u.a.createElement(P.a,{item:!0},u.a.createElement("br",null),u.a.createElement(x.a,{href:"/forgot_password",variant:"body1"},"Forgot password?"))))))},Ta=a(175),Na=a(173),ja=a.n(Na),ka=a(172),Aa=a.n(ka);var Ma=function(e){var t=e.editable,a=e.master,r=e.masterValue,l=e.slaves,c=e.slaveValues,o=e.onSave,i=(Object(k.a)(e,["editable","master","masterValue","slaves","slaveValues","onSave"]),u.a.useState(!1)),s=Object(n.a)(i,2),m=s[0],E=s[1],d=u.a.useState(),f=Object(n.a)(d,2),g=f[0],p=f[1],h=u.a.useState(r),v=Object(n.a)(h,2),b=v[0],S=v[1],I=u.a.useState([]),O=Object(n.a)(I,2),y=O[0],C=O[1],T=u.a.useState(c),N=Object(n.a)(T,2),j=N[0],A=N[1];function M(){p(b),C(j),E(!m)}return u.a.useEffect((function(){S(r),A(c)}),[r,c]),u.a.createElement(P.a,{container:!0,spacing:1,alignItems:"flex-end"},l&&l.map((function(e,t){return u.a.createElement(P.a,{item:!0,key:t},e({value:j[t]||"",InputProps:{readOnly:!m},onChange:function(e){return function(e,t){var a=j.map((function(a,n){return n===t?e.target.value:a}));A(a)}(e,t)}}))})),u.a.createElement(P.a,{item:!0},a({value:b||"",InputProps:{readOnly:!m},onChange:function(e){S(e.target.value)}})),t&&u.a.createElement(P.a,{item:!0},t?m?u.a.createElement(u.a.Fragment,null,u.a.createElement(Aa.a,{style:{cursor:"pointer"},onClick:function(){null!=b&&(o&&(j?o.apply(void 0,[b].concat(Object(Ta.a)(j))):o(b)),M())}}),u.a.createElement(ja.a,{style:{cursor:"pointer"},onClick:function(){S(g),A(y),M()}})):u.a.createElement(ge.a,{style:{cursor:"pointer"},onClick:M}):null))};var Da=function(){var e=u.a.useContext(h),t=u.a.useState(0),a=Object(n.a)(t,2),r=a[0],l=a[1],c=u.a.useState([]),o=Object(n.a)(c,2),i=o[0],s=o[1],m=u.a.useState([]),E=Object(n.a)(m,2),d=E[0],f=E[1],g=u.a.useState([]),p=Object(n.a)(g,2),v=p[0],b=p[1];return u.a.useEffect((function(){q("GET","USER_STATS",{token:e}).then((function(e){var t=e.data;console.log(t);var a=t.userStats;l(a.involvementRate),s(a.channelsJoined.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numChannelsJoined}}))),f(a.dmsJoined.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numDmsJoined}}))),b(a.messagesSent.map((function(e){return{x:new Date(1e3*e.timeStamp),y:e.numMessagesSent}})))})).catch((function(e){return console.log(e)}))}),[e]),u.a.createElement(u.a.Fragment,null,u.a.createElement(A.a,{variant:"h5"},"User statistics"),u.a.createElement("p",null,"Involvement rate: ",(100*r).toFixed(2),"%"),u.a.createElement(va.Scatter,{data:{datasets:[{label:"Channels joined",data:i,fill:!1,borderColor:"#742774",showLine:!0},{label:"Dms joined",data:d,fill:!1,borderColor:"#4287f5",showLine:!0},{label:"Messages sent",data:v,fill:!1,borderColor:"#bd2d4f",showLine:!0}]},options:{scales:{xAxes:[{title:"time",type:"time",gridLines:{lineWidth:2},time:{unitStepSize:200,displayFormats:{millisecond:"MMM DD HH:mm",second:"MMM DD HH:mm",minute:"MMM DD HH:mm",hour:"MMM DD HH:mm",day:"MMM DD",week:"MMM DD",month:"MMM DD",quarter:"MMM DD",year:"MMM DD"}}}]}}}))};var wa=function(e){var t=e.profile,a=u.a.useState(!0),r=Object(n.a)(a,2),l=r[0],c=r[1],o=u.a.useState({}),i=Object(n.a)(o,2),s=i[0],m=i[1],E=u.a.useContext(h),d=K();u.a.useEffect((function(){q("GET","USER_PROFILE",{token:E,uId:t}).then((function(e){var t=e.data;console.log(t);var a=t.user;m(a)})).catch((function(e){console.log(e)})).finally((function(){return c(!1)}))}),[t,E]);var f=d.toString()===t;return u.a.createElement(u.a.Fragment,null,u.a.createElement(A.a,{variant:"h4"},"Profile"),l?u.a.createElement(ne,null):u.a.createElement(M.a,{subheader:u.a.createElement(D.a,null,"Profile Details")},u.a.createElement(w.a,{key:"name"},u.a.createElement(Ma,{editable:f,masterValue:s.nameLast,slaveValues:[s.nameFirst],master:function(e){return u.a.createElement(pe.a,Object.assign({label:"Last Name"},e))},slaves:[function(e){return u.a.createElement(pe.a,Object.assign({label:"First Name"},e))}],onSave:function(e,t){q("PUT","USER_PROFILE_SETNAME",{token:E,nameFirst:t,nameLast:e}).then((function(e){var t=e.data;console.log(t)})).catch((function(e){console.log(e)}))}})),u.a.createElement(w.a,{key:"email"},u.a.createElement(Ma,{editable:f,masterValue:s.email,master:function(e){return u.a.createElement(pe.a,Object.assign({label:"Email"},e))},onSave:function(e){q("PUT","USER_PROFILE_SETEMAIL",{token:E,email:e}).then((function(e){var t=e.data;console.log(t)})).catch((function(e){console.log(e)}))}})),u.a.createElement(w.a,{key:"handle"},u.a.createElement(Ma,{editable:f,masterValue:s.handleStr,master:function(e){return u.a.createElement(pe.a,Object.assign({label:"Handle"},e))},onSave:function(e){q("PUT","USER_PROFILE_SETHANDLE",{token:E,handleStr:e}).then((function(e){var t=e.data;console.log(t)})).catch((function(e){return console.log(e)}))}})),u.a.createElement(w.a,{key:"imgUrl"},u.a.createElement(Ma,{editable:f,masterValue:s.profileImgUrl,master:function(e){return u.a.createElement(pe.a,Object.assign({label:"imgUrl,x1,y1,x2,y2"},e))},onSave:function(e){var t=e.split(",");q("POST","USER_PROFILE_UPLOADPHOTO",{token:E,imgUrl:t[0],xStart:Number.parseInt(t[1]),yStart:Number.parseInt(t[2]),xEnd:Number.parseInt(t[3]),yEnd:Number.parseInt(t[4])}).then((function(e){var t=e.data;console.log(t)})).catch((function(e){return console.log(e)}))}})),u.a.createElement("br",null),u.a.createElement("div",null,"NOTE: The final field input is to set a profile image. Please enter the 5 components (image url, xStart, yStart, xEnd, yEnd) separated by commas.")),u.a.createElement("br",null),f&&u.a.createElement(Da,null))};var La=function(e){var t=e.match.params.profile;return u.a.createElement(Ht,{menu:u.a.createElement(ia,null),body:u.a.createElement(wa,{profile:t})})},_a=Object(et.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.primary.light}},card:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",borderRadius:e.shape.borderRadius}}}));var Ra=function(e){var t=e.setAuth,a=Object(k.a)(e,["setAuth"]),r=u.a.useState(!1),l=Object(n.a)(r,2),c=l[0],o=l[1],i=u.a.useState({nameFirst:"",nameLast:"",email:"",password:""}),s=Object(n.a)(i,2),m=s[0],E=s[1],d=function(e){return function(t){E(Object(v.a)(Object(v.a)({},m),{},Object(Ze.a)({},e,t.target.value)))}},f=_a();return u.a.createElement(Ea.a,{component:"main",maxWidth:"sm"},u.a.createElement(da.a,{boxShadow:3,className:f.card},u.a.createElement(_.a,null,u.a.createElement(ga.a,{color:"secondary"})),u.a.createElement(A.a,{component:"h1",variant:"h5"},"Register"),c?u.a.createElement("div",{style:{marginTop:"64px"}},u.a.createElement(ne,null)):u.a.createElement("form",{noValidate:!0,onSubmit:function(e){e.preventDefault(),m.email&&m.password&&(o(!0),q("POST","AUTH_REGISTER",Object(v.a)({},m)).then((function(e){console.log(e);var n=e.data;t(n.token,n.authUserId),a.history.push("/")})).catch((function(e){return console.log(e)})).finally((function(){return o(!1)})))}},u.a.createElement(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"nameFirst",label:"First name",name:"nameFirst",type:"text",autoFocus:!0,value:m.nameFirst,onChange:d("nameFirst")}),u.a.createElement(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"nameLast",label:"Last name",name:"nameLast",type:"text",value:m.nameLast,onChange:d("nameLast")}),u.a.createElement(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",type:"email",value:m.email,onChange:d("email")}),u.a.createElement(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:m.password,onChange:d("password")}),u.a.createElement("div",{className:"password-warning"},"Passwords are not securely stored.",u.a.createElement("br",null),"Do not enter any currently used passwords."),u.a.createElement(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign Up"),u.a.createElement(P.a,{container:!0},u.a.createElement(P.a,{item:!0},u.a.createElement("br",null),u.a.createElement(x.a,{href:"/login",variant:"body1"},"Already have an account? Login"))))))},Pa=Object(et.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.primary.light}},card:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(8),padding:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",borderRadius:e.shape.borderRadius}}}));var xa=function(e){var t=u.a.useState(!1),a=Object(n.a)(t,2),r=a[0],l=a[1],c=Pa();return u.a.createElement(Ea.a,{component:"main",maxWidth:"sm"},u.a.createElement(da.a,{boxShadow:3,className:c.card},u.a.createElement(_.a,null,u.a.createElement(ga.a,{color:"secondary"})),u.a.createElement(A.a,{component:"h1",variant:"h5"},"Reset Password"),r?u.a.createElement("div",{style:{marginTop:"64px"}},u.a.createElement(ne,null)):u.a.createElement("form",{noValidate:!0,onSubmit:function(t){t.preventDefault();var a=t.target[0].value,n=t.target[2].value;a&&n&&(l(!0),q("POST","AUTH_PASSWORDRESET_RESET",{resetCode:a,newPassword:n}).then((function(t){console.log(t),e.history.push("/login")})).catch((function(e){return console.log(e)})).finally((function(){return l(!1)})))}},u.a.createElement(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"resetCode",label:"Reset code",name:"resetCode",type:"text",autoFocus:!0}),u.a.createElement(pe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"newPassword",label:"New Password",name:"newPassword",type:"password"}),u.a.createElement(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Change Password"),u.a.createElement(P.a,{container:!0},u.a.createElement(P.a,{item:!0},u.a.createElement("br",null),u.a.createElement(x.a,{href:"/login",variant:"body1"},"Remember your password? Login"))))))},Ua=a(394);var Fa=function(e){var t=e.queryStr,a=(Object(k.a)(e,["queryStr"]),u.a.useState(!0)),r=Object(n.a)(a,2),l=r[0],c=r[1],o=u.a.useState([]),i=Object(n.a)(o,2),s=i[0],m=i[1],E=u.a.useContext(h);return u.a.useEffect((function(){""!==t&&q("GET","SEARCH",{token:E,queryStr:t}).then((function(e){var t=e.data.messages;("undefined"===typeof t||Array.isArray(t))&&(m(t),c(!1))})).catch((function(e){console.log(e),c(!1)}))}),[E,t]),""===t?u.a.createElement(u.a.Fragment,null,u.a.createElement(A.a,{variant:"h4",style:{marginBottom:10}},"Search"),u.a.createElement(A.a,{variant:"h6"},"Enter a query in the search bar above")):u.a.createElement(u.a.Fragment,null,u.a.createElement(A.a,{variant:"h4",style:{marginBottom:10}},"Search Results"),l?u.a.createElement(Ua.a,null):0==s.length?u.a.createElement(A.a,{variant:"h6"},"Your search did not return any results"):u.a.createElement(M.a,{subheader:u.a.createElement(D.a,null,"Messages"),style:{width:"100%"}},s.slice().reverse().map((function(e){return u.a.createElement(Ke,Object.assign({key:e.messageId},e))}))))};var Ha=function(e){var t=e.match.params.queryStr,a=void 0===t?"":t;return u.a.createElement(Ht,{menu:u.a.createElement(ia,null),body:u.a.createElement(Fa,{queryStr:a})})};var Ga=function(){document.title="UNSW Memes";var e=u.a.useState(localStorage.getItem("token")),t=Object(n.a)(e,2),a=t[0],r=t[1];function l(e,t){localStorage.setItem("token",e),localStorage.setItem("uId",t),r(e)}return u.a.createElement(p,{value:a},u.a.createElement(d.a,null,u.a.createElement(f.d,null,u.a.createElement(f.b,{exact:!0,path:"/login",render:function(e){return u.a.createElement(Ca,Object.assign({},e,{setAuth:l}))}}),u.a.createElement(f.b,{exact:!0,path:"/register",render:function(e){return u.a.createElement(Ra,Object.assign({},e,{setAuth:l}))}}),u.a.createElement(f.b,{exact:!0,path:"/forgot_password",component:ha}),u.a.createElement(f.b,{exact:!0,path:"/reset_password",component:xa}),u.a.createElement(j,{exact:!0,path:"/",component:Sa}),u.a.createElement(j,{path:"/profile/:profile",component:La}),u.a.createElement(j,{path:"/channel/:channelId",component:ua}),u.a.createElement(j,{path:"/dm/:dmId",component:ma}),u.a.createElement(j,{path:"/search/:queryStr",component:Ha}),u.a.createElement(j,{path:"/search",component:Ha}))))};a(324),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Wa=a(98),Va=a(174),za=Object(Va.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:Wa.a.A400},background:{default:"#fff"}}}),qa=Object(Va.a)({palette:{type:"dark",primary:{main:"#BB86FC"},secondary:{main:"#03DAC6"},error:{main:"#CF6679"},background:{main:"#36454F"},text:{main:"#fff"}}}),Ba=function(e){var t=e.theme,a=e.toggleTheme;return u.a.createElement("button",{onClick:a},"light"===t?"Dark Mode":"Light Mode")};function Ja(){var e=u.a.useState(localStorage.getItem("theme")||"light"),t=Object(n.a)(e,2),a=t[0],i=t[1];return u.a.useEffect((function(){console.log(a),localStorage.setItem("theme",a),document.body.className=a}),[a]),u.a.createElement(o.a,{theme:"light"===a?za:qa},u.a.createElement(c.a,{utils:r.a},u.a.createElement(l.a,null),u.a.createElement("nav",null,u.a.createElement(Ba,{theme:a,toggleTheme:function(){i("light"===a?"dark":"light")}})),u.a.createElement(Ga,null),u.a.createElement(E.a,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0})))}m.a.render(u.a.createElement(Ja,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[200,1,2]]]);
//# sourceMappingURL=main.d568ddd2.chunk.js.map